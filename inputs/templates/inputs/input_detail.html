{% extends 'layout.html' %}

{% block title %}Inbox {{input.form.name}}{% endblock %}

{% block body %}

  <div class="row">
    <div class="column small-12 large-10">
      <h1>{{input.form.name}}</h1>

    </div>
  </div>

  <div class="row">
    <div class="column large-8 small-12">
      
      <div class="form-content">
	
	<form method="post" action="{% url 'inbox:create' %}" id="input-form" name="{{input.form.id}}">
	  {% autoescape off %}
	    {{input.form.content}}
	  {% endautoescape %}

	  <br/><hr/>

	  <h4>Routing</h4>

	  <div class="row">
	    <div class="columns large-4">
	      <input name="send-to" id="send-to" type="text" placeholder="Send to..." class="inline" />
	    </div>

	    <div class="columns large-4">
	      <button type="button" class="button small" title="Send">&#x27A4;</button>
	      <button type="button" class="button small success float-right" title="Archive">&#9745;</button>
	    </div>
	  </div>

	  <ul class="no-bullet">
	    {% if input.status == 'new' %}
	      <route v-for="route in routes" :key="route.id" :input-id="input.id" :id="route.id" :dests="route.dests"></route>
	    {% else %}
	      <route
		:input-id="input.id"
		:id="input.route.id"
	        :dests="input.route.dests"
	        :input-current-dest="input.current_dest"
		:input-current-step="input.step"
		:route-holder="input.route_holder"></route>
	    {% endif %}
	  </ul>

	  <br/><hr/>
	  <button type="button" class="button success" @click="submitForm">Update</button>
	  <a href="{% url 'inbox:delete' pk=input.pk %}" class="button tiny alert float-right">Delete</a>
	</form>
      </div>
      
    </div>
  </div>

{% endblock %}

{% block vue %}
  {% include 'form_vue.html' with data=input.data %}
{% endblock %}
